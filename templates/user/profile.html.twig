{% extends 'base.html.twig' %}

{% block title %}Mon Profil
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<h1>Mon Profil</h1>
		<div class="card">
			<div class="card-body">
				<ul class="list-group list-group-flush">
					<li
						class="list-group-item d-flex justify-content-center">
						{# Utilisation de justify-content-center pour centrer #}
						{% if user.avatar %}
							<img src="{{ vich_uploader_asset(user, 'avatarFile') }}" class="img-fluid rounded custom-avatar" alt="{{ user.lastname }} {{ user.firstname }}">
						{% else %}
							<img src="{{ asset('uploads/images/avatar-default.jpg') }}" class="img-fluid rounded custom-avatar" alt="{{ user.lastname }} {{ user.firstname }}">
						{% endif %}
					</li>
					<!-- Formulaire pour changer l'image de profil -->
					<form action="{{ path('user_edit_avatar', {'id': user.id}) }}" method="post" enctype="multipart/form-data" class="mt-3">
						<div class="mb-3">
							<label for="avatarFile" class="form-label">Changer l'image de profil</label>
							<input type="file" id="avatarFile" name="avatarFile" class="form-control">
						</div>
						<button type="submit" class="btn btn-primary">Enregistrer</button>
					</form>
					<h5 class="card-title mt-3">Informations personnelles</h5>
					<li class="list-group-item">
						<strong>Email :</strong>
						{{ user.email }}
					</li>
					<li class="list-group-item">
						<strong>Nom :</strong>
						{{ user.lastname }}
					</li>
					<li class="list-group-item">
						<strong>Prénom :</strong>
						{{ user.firstname }}
					</li>
					<li class="list-group-item">
						<strong>Biographie :</strong>
						{{ user.biography }}
					</li>
				</ul>
				<h5 class="card-title mt-3">Ma liste de séries à voir</h5>
				<ul>
					{% for program in watchlist %}
						<li class="list-group-item">
							<a href="{{ path('program_show', {'slug': program.slug}) }}" class="text-decoration-none">
								{{ program.title }}
							</a>
						</li>
					{% else %}
						<li class="list-group-item">Aucun programme dans votre liste de suivi.</li>
					{% endfor %}
				</ul>
				<a href="{{ path('user_edit', {'id': user.id}) }}" class="btn btn-primary mt-3">Modifier</a>
			</div>
		</div>
	</div>
{% endblock %}
